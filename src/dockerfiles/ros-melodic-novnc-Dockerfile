FROM ros-melodic:full

ENV DEBIAN_FRONTEND noninteractive

RUN apt-get update 

RUN apt-get install -y git
RUN apt-get install -y x11vnc
RUN apt-get install -y wget
RUN apt-get install -y python3
RUN apt-get install -y python3-numpy
RUN apt-get install -y unzip
RUN apt-get install -y xvfb
RUN apt-get install -y icewm
RUN apt-get install -y tree
RUN apt-get install -y vim
#RUN apt-get install -y dos2unix

RUN cd /root && git clone https://github.com/kanaka/noVNC.git && \
    cd noVNC/utils && git clone https://github.com/kanaka/websockify websockify

ENV DISPLAY :1
ENV SCREEN 0
ENV SCREEN_SIZE 1280x768x24

COPY src/scripts/start_novnc.sh start_novnc.sh
RUN chmod 0755 start_novnc.sh

RUN vim start_novnc.sh +"set ff=unix" +wq